#!/bin/bash
function usage
{
        echo "Usage: ./bigfiles [number of Mbytes]"
}

function trap_exit
{
        echo -e "\n*****************************"
        echo -e "Exiting on a trap signal"
        echo -e "\n*****************************"
}

DATESTAMP=$(date +"%h%d,%Y,%T")
SEARCH_PATH=$(pwd)

#set a trap to exit
trap 'trap_exit; exit 2' 1 2 3 15

echo
echo "*************************************************"

if [ $# -ne 1 ]
then
        usage
        exit 1
fi

echo Searching for files larger than $1MB starting in:
echo
echo $SEARCH_PATH
echo
echo Please stand by for the RESULTS
echo
echo Date and Time of Search: $DATESTAMP
echo
find -H $SEARCH_PATH -type f -size +$1M > temp1.txt

if [ -s temp1.txt ]
then
        W=$(cat temp1.txt | wc -l)
        echo Number of files found: $W
        echo
        echo Files Found are:
        cat temp1.txt | more
else
        echo No files were found that are larger than $1MB
        echo Exiting...
fi
rm temp1.txt
echo "**************************************************"
echo
